# Castpod

> v0.1.1

ä¸€ä¸ª [Telegram æœºå™¨äºº](https://core.telegram.org/bots/api)ã€‚ç‚¹å‡»[é“¾æ¥](https://t.me/castpodbot)å¼€å§‹ä½¿ç”¨å§ï¼
ï¼ˆé¡¹ç›®ä»å¤„äºåˆæœŸé˜¶æ®µï¼ŒäºŸå¾…å®Œå–„ã€‚ï¼‰

## åŸºæœ¬

ç‚¹å‡» `å¼€å§‹` ä»¥å¯åŠ¨æœºå™¨äººï¼Œæ‰€æœ‰çš„äº¤äº’åœ¨å¯¹è¯æ¡†ä¹‹é—´å®Œæˆã€‚

### æŒ‡ä»¤

ç‚¹å‡»æ–‡æœ¬è¾“å…¥æ¡†ä¸€æ—çš„ `/` å¯ä»¥å”¤å‡ºæŒ‡ä»¤ã€‚ä¸»è¦æŒ‡ä»¤å¦‚ä¸‹ï¼š

- `/manage`ï¼šç®¡ç†å·²è®¢é˜…çš„æ’­å®¢
- `/help`ï¼šå¸®åŠ©ä¸æŒ‡å—

ä½¿ç”¨ `/help` åï¼Œå¼¹å‡ºçš„å…¶ä»–æŒ‡ä»¤ï¼š

- `/about`ï¼šå…³äºæœ¬æœºå™¨äººä¸ä½œè€…
- `/export`ï¼šå¯¼å‡ºè®¢é˜…æ–‡ä»¶
- `/logout`ï¼šæ³¨é”€è´¦å·å¹¶**æ¸…ç©º**æ‰€æœ‰æ•°æ®

### å¯¼å…¥æ’­å®¢

1. ç›´æ¥å‘é€è®¢é˜…æºæ–‡ä»¶ï¼ˆXML/OPMLï¼‰ä»¥æ‰¹é‡è®¢é˜…ï¼›
2. å‘é€æ’­å®¢çš„ RSS è®¢é˜…åœ°å€ï¼ˆXMLï¼‰

### è®¢é˜…ã€æ”¶å¬ä¸ç®¡ç†

1. å¯åŠ¨æœºå™¨äººä¹‹åï¼Œç‚¹å‡» `æœç´¢æ’­å®¢` æŒ‰é’®ï¼Œæˆ–è€…è¾“å…¥ `@` æ‰¾åˆ° `@castpodbot`ï¼Œè¾“å…¥å…³é”®å­—å³å¯æœç´¢æ’­å®¢å¹¶è®¢é˜…ã€‚
2. è®¢é˜…ä¹‹åï¼Œç‚¹å‡» `åˆ†é›†åˆ—è¡¨` é€‰æ‹©èŠ‚ç›®ä¸‹è½½æ”¶å¬ã€‚
3. åŒç¬¬ä¸€æ­¥ï¼Œè¾“å…¥ `@castpodbot`ï¼Œåœ¨ä¸è¾“å…¥å…³é”®å­—çš„æƒ…å†µä¸‹ï¼Œè¿™é‡Œé™ˆåˆ—ç€å…¨éƒ¨å·²è®¢é˜…çš„æ’­å®¢ã€‚

## éƒ¨ç½²

å¦‚æœæ‚¨æœ‰ä¸€ç‚¹æŠ€æœ¯èƒŒæ™¯ï¼Œå¯ä»¥è€ƒè™‘è‡ªå·±éƒ¨ç½²è¿™ä¸ªæœºå™¨äººï¼Œè¿™æ ·å¯ä»¥å‡å°‘æˆ‘ä»¬æœåŠ¡å™¨çš„å‹åŠ›ï¼ŒåŒæ—¶å¸¦ç»™æ‚¨æ›´æµç•…çš„ä½¿ç”¨ä½“éªŒã€‚

### å®‰è£…ä¾èµ–

ä½¿ç”¨ `python -m pip install -r requirements.txt` å®‰è£…æ‰€æœ‰ä¾èµ–ã€‚

### é…ç½®

åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ `config.ini` ï¼Œå¡«å†™æ‰€éœ€çš„å˜é‡ã€‚

```config.ini
[BOT]
TOKEN_TEST = æœºå™¨äººæµ‹è¯•tokenï¼Œå¯é€‰ã€‚
TOKEN = æœºå™¨äººtokenï¼Œæ‰¾ @BotFather é¢†å–
PROXY = æœ¬åœ°æµ‹è¯•ä»£ç† http é“¾æ¥ï¼Œé¿å¼€ç½‘è·¯å°é”
API = è‡ªéƒ¨ç½²çš„ telegram-bot-api åœ°å€ï¼Œæ’­å®¢æ–‡ä»¶ä¸€èˆ¬è¾ƒå¤§ï¼Œå¦‚æœä¸è‡ªå·±éƒ¨ç½²ä¼šè¶…å‡º Telegram çš„ä¼ è¾“é™åˆ¶ã€‚
PODCAST_VAULT = Telegramã€Œæ’­å®¢å¹¿åœºã€çš„é¢‘é“IDï¼Œå³@åé¢çš„å†…å®¹ã€‚è¿™ä¸æœ¬æœºå™¨äººçš„æ’­å®¢åˆ†å‘æ¨¡å¼æœ‰å…³ï¼Œå¯èƒ½ä¸å¤ªå¥½ç†è§£ã€‚

[WEBHOOK]
PORT = Webhook ç«¯å£æ•°å­—ï¼Œä¸ä½¿ç”¨è¯·æ— è§†

[DEV]
USER_ID = å¼€å‘è€…ï¼ˆæ‚¨ï¼‰çš„ Telegram IDï¼Œæ•´æ•°ã€‚

[MONGODB]
USER = ç”¨æˆ·åï¼Œå¯é€‰
PWD = å¯†ç ï¼Œå¯é€‰
DB_NAME = æ•°æ®åº“çš„åå­—
REMOTE_HOST = æœåŠ¡å™¨IPï¼Œç”¨äºæœ¬åœ°æµ‹è¯•ï¼ˆä½†å¹¶ä¸å®‰å…¨ï¼‰ï¼Œå¯é€‰ã€‚
```

### æ•°æ®åº“

å®‰è£… MongoDBï¼Œè¿è¡Œ `mongod`ã€‚

### Polling v.s Webhook

[Webhook](https://github.com/python-telegram-bot/python-telegram-bot/wiki/Webhooks) å’Œ Polling ä¸¤ç§æ–¹æ³•æ‹©å…¶ä¸€ï¼Œ**å»ºè®®ä» Polling ç›´æ¥ä¸Šæ‰‹**ï¼Œæ— éœ€æ›´å¤šé…ç½®ã€‚

åœ¨ `bot.py` æ–‡ä»¶ä¸­æ³¨é‡Šæ‰å« #webhook çš„**ä¸¤æ¡è¯­å¥**ã€å–æ¶ˆæ³¨é‡Šå« polling çš„**ä¸¤æ¡è¯­å¥**å³å¯ã€‚

### éƒ¨ç½² Telegram Bot API

å¾—ç›Šäºè¿‘æ—¥ Bot API å·²ç»å¼€æºï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥è‡ªå·±éƒ¨ç½²ä¸€ä¸ª Bot APIã€‚è¿™æ˜¯å› ä¸ºæ’­å®¢éŸ³é¢‘å¾€å¾€æ¯”è¾ƒå¤§ï¼Œè¶…å‡ºäº† Telegram çš„ä¸Šä¼ é™åˆ¶ï¼Œæ‰€ä»¥éœ€è¦è‡ªè¡Œéƒ¨ç½²ã€‚

å…³äºå¦‚ä½•éƒ¨ç½²ï¼Œè¯·å‚è€ƒ Telegram çš„[å®˜æ–¹éƒ¨ç½²æŒ‡å—](https://tdlib.github.io/telegram-bot-api/build.html)ã€‚

### è¿è¡Œ

- ç›´æ¥è¿è¡Œï¼š `python bot.py`
- æ¨èä½¿ç”¨è¿›ç¨‹ç®¡ç†å™¨è¿è¡Œï¼Œå¦‚ [PM2](https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/) ï¼š`pm2 start bot.py --name castpod --interpreter python --kill-timeout 3000`

## æ”¯æŒæœ¬é¡¹ç›®

### æ–‡æ¡£æ”¯æŒ

å¸®åŠ©æˆ‘ä»¬å¡«å†™[èµ„æ–™åº“](https://github.com/dahawong/castpod/wiki)ã€‚æ–‡æ¡£å¡«å†™è¿›åº¦è¯¦è§[æ–‡æ¡£ä¹¦å†™](https://github.com/DahaWong/castpod/projects/5)

### æŠ€æœ¯æ”¯æŒ

> æˆ‘ä»¬ç†Ÿæ‚‰ Telegram çš„ç”Ÿæ€ï¼Œä½†å¯¹ Python ç‰¹æ€§ä¸æ•°æ®åº“ç›¸å…³å¤„ç†å¹¶ä¸ç†Ÿç»ƒï¼Œä»£ç äºŸå¾…ä¼˜åŒ–ã€‚æ¬¢è¿æä¾›å»ºè®®/å­¦ä¹ èµ„æº/PR

æ›´å¤šä¿¡æ¯è¯·å‚è§[å¼€å‘è¡Œç¨‹](https://github.com/DahaWong/castpod/projects/2)ã€[é¡¹ç›®æ¼æ´](https://github.com/DahaWong/castpod/projects/3)

### ç»æµæ”¯æŒ

1. [çˆ±å‘ç”µ](https://afdian.net/@castpodbot)
2. [Buy me a coffee](https://www.buymeacoffee.com/daha)

<a href="https://www.buymeacoffee.com/daha"><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a Cherry  : )&emoji=ğŸ’&slug=daha&button_colour=FF5F5F&font_colour=ffffff&font_family=Poppins&outline_colour=000000&coffee_colour=FFDD00"></a>
